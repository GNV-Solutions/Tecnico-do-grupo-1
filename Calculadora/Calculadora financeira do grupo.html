<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <h1>Simulador de prejuízo financeiro</h1>
      <br />
      Qual o faturamento mensal do posto: <br />
      <input
        type="number"
        id="input_faturamento"
        placeholder="Insira o faturamento"
      />
      <br /><br />

      Qual a margem de lucro do posto em porcentagem: <br />
      <input
        type="number"
        id="input_lucro"
        placeholder="Insira em porcentagem"
      />
      <br /><br />

      Qual foi o investimento na construção do posto:<br />
      <input
        type="number"
        id="input_investimento"
        placeholder="Insira o investimento"
      />
      <br /><br />

      Qual o tamanho do cilindro que explodiu: <br />
      <select id="input_cilindro">
        <option value="10">10%</option>
        <option value="20">20%</option>
        <option value="50">50%</option>
      </select>
      <br /><br />

      <button onclick="Calcular()">Calcular prejuízo</button>
    </div>

    <div id="div_mensagem"></div>
  </body>
</html>

<script>
  var diaFechado = 0;
  var prejuizoTotal = 0;
  function Calcular() {
    var faturamento = Number(input_faturamento.value);
    var porcentagemLucro = Number(input_lucro.value);
    var estrutura = Number(input_investimento.value);
    var cilindro = input_cilindro.value;
    var porcentagemDestruicao = 0;
    var faturamentodiario = faturamento / 30;
    var lucroDiario = (porcentagemLucro / 100) * faturamentodiario;

    if (cilindro == 10) {
      diaFechado = 3;
      porcentagemDestruicao = 0.1;
      estrutura *= porcentagemDestruicao;
      faturamentodiario *= diaFechado;
      prejuizoTotal = estrutura;
    }
    if (cilindro == 20) {
      diaFechado = 7;
      porcentagemDestruicao = 0.20;
      estrutura *= porcentagemDestruicao;
      faturamentodiario *= diaFechado;
      prejuizoTotal = estrutura;
    }
    if (cilindro == 50) {
      diaFechado = 21;
      porcentagemDestruicao = 0.5;
      estrutura *= porcentagemDestruicao;
      faturamentodiario *= diaFechado;
      prejuizoTotal = estrutura;
    }

    var diaRecuperacao = prejuizoTotal / lucroDiario;
    div_mensagem.innerHTML = `O prejuízo estimado em caso de acidente envolvendo um cilindro de tamanho <b>${cilindro}</b>, que tem um
            percentual de explosão da estrutura de 
            <b>${porcentagemDestruicao * 100}%</b> envolve valores como: <br>
            <br> A destruição e reconstrução da estrutura do posto, além da compra de dispensers e equipamentos novos,
            que chega a R$${estrutura}.
            <br> A perda no faturamento devido à paralisação de ${diaFechado} dias no posto, na qual chega a R$${faturamentodiario.toFixed()}.
            <br> <br> <b> Total de prejuízo estimado: R$ ${prejuizoTotal.toFixed(1)}.
            </b> <br> <br> O período estimado para recuperar o prejuízo de R$${prejuizoTotal.toFixed(1)}
            <br> será de ~${diaRecuperacao.toFixed(1)} dias, dado o lucro diário de R$${lucroDiario.toFixed(2)}.`;
  }
</script>
